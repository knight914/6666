const $ = new API("ysf_sign", true); const notify = $.isNode() ? require('./sendNotify') : null; const header = { "Host": "youhui.95516.com", "Accept": "application/json, text/plain, */*", "Authorization": $request.headers['Authorization'] || '', "Sec-Fetch-Site": "same-origin", "Accept-Language": "zh-CN,zh-Hans;q=0.9", "x-city": "360900", "Sec-Fetch-Mode": "cors", "Accept-Encoding": "gzip, deflate, br", "Origin": "https://youhui.95516.com", "Content-Length": "2", "User-Agent": "Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148/sa-sdk-ios (com.unionpay.chsp) (cordova 4.5.4) (updebug 0) (version 938) (UnionPay/1.0 CloudPay) (clientVersion 198) (language zh_CN) (upHtml) (walletMode 00)", "Referer": "https://youhui.95516.com/newsign/public/app/index.html", "Connection": "keep-alive", "Content-Type": "application/json", "Sec-Fetch-Dest": "empty", "Cookie": $request.headers['Cookie'] || '' }; const payload = {}; $.post({ url: 'https://youhui.95516.com/newsign/api/daily_sign_in', headers: header, body: JSON.stringify(payload) }, (error, response, data) => { if (error) { $.log(error); return; } try { const result = JSON.parse(data); const msg = result.signedIn ? '成功' : '失败'; const days = result.signInDays.days; const currentDays = result.signInDays.current.days; $.notify('云闪付签到结果', `签到${msg}\n目前连续签到天数为：${days}\n这个月连续签到天数：${currentDays}`); $.done(); } catch (e) { $.log(e); } });
